# ã‚¿ã‚¹ã‚¯åˆ†è§£æ©Ÿèƒ½ è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## æ¦‚è¦

ãƒ’ã‚¢ãƒªãƒ³ã‚°æ™‚ã«å¾—ã‚‰ã‚ŒãŸæ–‡ç« ï¼ˆè¦ä»¶ã‚„èª²é¡Œã®èª¬æ˜ï¼‰ã‚’è²¼ã‚Šä»˜ã‘ã¦ã€LLMã‚’ä½¿ã£ã¦æ©Ÿèƒ½è¿½åŠ ã‚„ãƒã‚°ä¿®æ­£ã®ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã€ä¸€æ‹¬ç™»éŒ²ã™ã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚

## ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚’å®Ÿæ–½
2. ãƒ’ã‚¢ãƒªãƒ³ã‚°å†…å®¹ã‚’ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦è¨˜éŒ²
3. dursor ã«ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ã‚’è²¼ã‚Šä»˜ã‘
4. LLM ãŒã‚¿ã‚¹ã‚¯ã«åˆ†è§£ï¼ˆæ©Ÿèƒ½è¿½åŠ /ãƒã‚°ä¿®æ­£/ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ç­‰ï¼‰
5. åˆ†è§£ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’ç¢ºèªãƒ»ç·¨é›†
6. é¸æŠã—ãŸã‚¿ã‚¹ã‚¯ã‚’ä¸€æ‹¬ç™»éŒ²
7. å€‹åˆ¥ã®ã‚¿ã‚¹ã‚¯ã‚’é¸æŠã—ã¦å®Ÿè¡Œï¼ˆæ—¢å­˜æ©Ÿèƒ½ï¼‰
```

## UI é…ç½®æ¡ˆ

### æ¡ˆ1: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ãƒœã‚¿ãƒ³è¿½åŠ ï¼ˆæ¨å¥¨ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dursor             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ New Task]       â”‚  â† æ—¢å­˜
â”‚ [âœ¦ Breakdown]      â”‚  â† æ–°è¦è¿½åŠ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Search tasks...    â”‚
â”‚ 3 tasks | Newest â–¼ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Task 1             â”‚
â”‚ Task 2             â”‚
â”‚ ...                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- æ—¢å­˜ã®ã€ŒNew Taskã€ãƒœã‚¿ãƒ³ã¨ä¸¦ã¹ã‚‹ã“ã¨ã§ã€ã‚¿ã‚¹ã‚¯ä½œæˆã®2ã¤ã®æ–¹æ³•ã¨ã—ã¦æ˜ç¢º
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã¯å¸¸ã«è¡¨ç¤ºã•ã‚Œã‚‹ãŸã‚ã€ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ã„
- æ—¢å­˜UIã¸ã®å½±éŸ¿ãŒæœ€å°é™

**å®Ÿè£…ç®‡æ‰€**: `apps/web/src/components/Sidebar.tsx`

### æ¡ˆ2: ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã«ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Single Task] | [Breakdown]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ãƒ’ã‚¢ãƒªãƒ³ã‚°å†…å®¹ã‚’ãƒšãƒ¼ã‚¹ãƒˆ...         â”‚  â”‚
â”‚  â”‚                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                           â”‚
â”‚  [åˆ†è§£ã™ã‚‹]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®æ—¢å­˜å…¥åŠ›ã‚¨ãƒªã‚¢ã‚’å†åˆ©ç”¨ã§ãã‚‹
- å˜ä¸€ã‚¿ã‚¹ã‚¯ã¨åˆ†è§£ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®å½¹å‰²ãŒè¤‡é›‘ã«ãªã‚‹
- æ—¢å­˜UIã®å¤§å¹…ãªå¤‰æ›´ãŒå¿…è¦

### æ¡ˆ3: æ–°è¦ãƒšãƒ¼ã‚¸è¿½åŠ  `/breakdown`

å°‚ç”¨ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã—ã€ã‚ˆã‚Šå¤§ããªå…¥åŠ›ã‚¨ãƒªã‚¢ã¨åˆ†è§£çµæœè¡¨ç¤ºã‚’æŒã¤ã€‚

**ãƒ¡ãƒªãƒƒãƒˆ**:
- å¤§é‡ã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã«é©ã—ãŸUIè¨­è¨ˆãŒå¯èƒ½
- è¤‡é›‘ãªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’åå®¹ã§ãã‚‹

**ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**:
- æ–°ã—ã„ãƒ«ãƒ¼ãƒˆã®è¿½åŠ 
- UIã®ä¸€è²«æ€§ç¶­æŒã«æ³¨æ„ãŒå¿…è¦

---

## æ¨å¥¨æ¡ˆ: æ¡ˆ1ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ + ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰

ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ã€ŒBreakdownã€ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ã—ã€ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ãæ–¹å¼ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

### ç†ç”±
1. æ—¢å­˜UIã¸ã®å½±éŸ¿ãŒæœ€å°é™
2. ãƒ¢ãƒ¼ãƒ€ãƒ«å½¢å¼ã«ã‚ˆã‚Šã€ã©ã®ãƒšãƒ¼ã‚¸ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
3. è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆ`SettingsModal`ï¼‰ã¨åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã§ãã€ã‚³ãƒ¼ãƒ‰ã®ä¸€è²«æ€§ã‚’ç¶­æŒ

---

## UI è©³ç´°è¨­è¨ˆ

### Breakdown ãƒ¢ãƒ¼ãƒ€ãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¦ ã‚¿ã‚¹ã‚¯åˆ†è§£                                      [Ã—]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  ãƒªãƒã‚¸ãƒˆãƒª: [owner/repo â–¼]    ãƒ–ãƒ©ãƒ³ãƒ: [main â–¼]       â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ãƒ’ã‚¢ãƒªãƒ³ã‚°å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„...              â”‚  â”‚
â”‚  â”‚                                                    â”‚  â”‚
â”‚  â”‚ ä¾‹:                                               â”‚  â”‚
â”‚  â”‚ ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’é–“é•ãˆã‚‹ã¨           â”‚  â”‚
â”‚  â”‚   ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„                 â”‚  â”‚
â”‚  â”‚ ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã«æ¤œç´¢æ©Ÿèƒ½ãŒæ¬²ã—ã„                 â”‚  â”‚
â”‚  â”‚ ãƒ»ç®¡ç†è€…ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒšãƒ¼ã‚¸ã‚’ä½œã‚ŠãŸã„       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚  ãƒ¢ãƒ‡ãƒ«: [Claude 3.5 Sonnet â–¼]  â† ã‚¿ã‚¹ã‚¯åˆ†è§£ç”¨          â”‚
â”‚                                                          â”‚
â”‚  [åˆ†è§£ã™ã‚‹]                                              â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†è§£çµæœ (3ä»¶)                                          â”‚
â”‚                                                          â”‚
â”‚  â˜‘ ğŸ› ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºä¿®æ­£            â”‚
â”‚      ãƒã‚°ä¿®æ­£ | æ¨å®š: å°                                 â”‚
â”‚      è©³ç´°: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼å¤±æ•—æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒ...   â”‚
â”‚                                                          â”‚
â”‚  â˜‘ âœ¨ ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã«æ¤œç´¢æ©Ÿèƒ½ã‚’è¿½åŠ                        â”‚
â”‚      æ©Ÿèƒ½è¿½åŠ  | æ¨å®š: ä¸­                                 â”‚
â”‚      è©³ç´°: ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§çµã‚Šè¾¼ã¿...       â”‚
â”‚                                                          â”‚
â”‚  â˜‘ ğŸ”’ ç®¡ç†è€…å°‚ç”¨ãƒšãƒ¼ã‚¸ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡å®Ÿè£…                 â”‚
â”‚      æ©Ÿèƒ½è¿½åŠ  | æ¨å®š: å¤§                                 â”‚
â”‚      è©³ç´°: RBACï¼ˆRole-Based Access Controlï¼‰ã‚’...        â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [é¸æŠã—ãŸã‚¿ã‚¹ã‚¯ã‚’ç™»éŒ² (3ä»¶)]              [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ…‹é·ç§»

```
å…¥åŠ›ä¸­ â†’ åˆ†è§£ä¸­(ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°) â†’ çµæœè¡¨ç¤º â†’ ã‚¿ã‚¹ã‚¯é¸æŠ â†’ ç™»éŒ²ä¸­ â†’ å®Œäº†
```

---

## API è¨­è¨ˆ

### æ–°è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

#### `POST /v1/breakdown`

ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ã‚’ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã™ã‚‹ã€‚

**Request:**

```json
{
  "content": "ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ...",
  "model_id": "model-profile-id",
  "repo_id": "repo-id",
  "context": {
    "language": "ja",
    "additional_info": "ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªè¿½åŠ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ"
  }
}
```

**Response:**

```json
{
  "tasks": [
    {
      "title": "ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºä¿®æ­£",
      "description": "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰èªè¨¼å¤±æ•—æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„å•é¡Œã‚’ä¿®æ­£ã™ã‚‹",
      "type": "bug_fix",
      "estimated_size": "small",
      "tags": ["auth", "ui"]
    },
    {
      "title": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã«æ¤œç´¢æ©Ÿèƒ½ã‚’è¿½åŠ ",
      "description": "ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã§ãã‚‹æ¤œç´¢æ©Ÿèƒ½ã‚’å®Ÿè£…",
      "type": "feature",
      "estimated_size": "medium",
      "tags": ["user-management", "search"]
    }
  ],
  "summary": "3ä»¶ã®ã‚¿ã‚¹ã‚¯ã«åˆ†è§£ã—ã¾ã—ãŸ",
  "original_content": "ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ..."
}
```

#### `POST /v1/tasks/bulk`

è¤‡æ•°ã‚¿ã‚¹ã‚¯ã‚’ä¸€æ‹¬ç™»éŒ²ã™ã‚‹ã€‚

**Request:**

```json
{
  "repo_id": "repo-id",
  "tasks": [
    {
      "title": "ã‚¿ã‚¹ã‚¯1",
      "description": "èª¬æ˜1"
    },
    {
      "title": "ã‚¿ã‚¹ã‚¯2",
      "description": "èª¬æ˜2"
    }
  ]
}
```

**Response:**

```json
{
  "created_tasks": [
    { "id": "task-id-1", "title": "ã‚¿ã‚¹ã‚¯1" },
    { "id": "task-id-2", "title": "ã‚¿ã‚¹ã‚¯2" }
  ],
  "count": 2
}
```

---

## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å®Ÿè£…è¨ˆç”»

### 1. æ–°ã—ã„ã‚µãƒ¼ãƒ“ã‚¹: `BreakdownService`

```
apps/api/src/dursor_api/services/breakdown_service.py
```

**è²¬å‹™**:
- ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ã®å—ã‘å–ã‚Š
- LLM ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é€ä¿¡ã—ã¦ã‚¿ã‚¹ã‚¯åˆ†è§£
- çµæœã®ãƒ‘ãƒ¼ã‚¹ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### 2. æ–°ã—ã„ãƒ«ãƒ¼ãƒˆ: `routes/breakdown.py`

```
apps/api/src/dursor_api/routes/breakdown.py
```

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**:
- `POST /v1/breakdown` - ã‚¿ã‚¹ã‚¯åˆ†è§£
- `POST /v1/tasks/bulk` - ä¸€æ‹¬ç™»éŒ²ï¼ˆã¾ãŸã¯ `routes/tasks.py` ã«è¿½åŠ ï¼‰

### 3. ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«è¿½åŠ 

```python
# domain/models.py ã«è¿½åŠ 

class TaskBreakdownRequest(BaseModel):
    """ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒªã‚¯ã‚¨ã‚¹ãƒˆ"""
    content: str = Field(..., description="ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ")
    model_id: str = Field(..., description="åˆ†è§£ã«ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ID")
    repo_id: str = Field(..., description="å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªID")
    context: dict[str, Any] | None = None

class BrokenDownTask(BaseModel):
    """åˆ†è§£ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯"""
    title: str
    description: str
    type: str  # "feature", "bug_fix", "refactoring", "docs", etc.
    estimated_size: str  # "small", "medium", "large"
    tags: list[str] = []

class TaskBreakdownResponse(BaseModel):
    """ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ¬ã‚¹ãƒãƒ³ã‚¹"""
    tasks: list[BrokenDownTask]
    summary: str
    original_content: str

class TaskBulkCreate(BaseModel):
    """ã‚¿ã‚¹ã‚¯ä¸€æ‹¬ä½œæˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ"""
    repo_id: str
    tasks: list[TaskCreate]

class TaskBulkCreated(BaseModel):
    """ã‚¿ã‚¹ã‚¯ä¸€æ‹¬ä½œæˆãƒ¬ã‚¹ãƒãƒ³ã‚¹"""
    created_tasks: list[Task]
    count: int
```

### 4. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ

```python
BREAKDOWN_SYSTEM_PROMPT = """
ã‚ãªãŸã¯ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºã®ã‚¿ã‚¹ã‚¯åˆ†è§£ã®å°‚é–€å®¶ã§ã™ã€‚
ãƒ’ã‚¢ãƒªãƒ³ã‚°å†…å®¹ã‹ã‚‰å…·ä½“çš„ãªé–‹ç™ºã‚¿ã‚¹ã‚¯ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚

## å‡ºåŠ›å½¢å¼
ä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„:

{
  "tasks": [
    {
      "title": "ç°¡æ½”ãªã‚¿ã‚¹ã‚¯ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆ50æ–‡å­—ä»¥å†…ï¼‰",
      "description": "ã‚¿ã‚¹ã‚¯ã®è©³ç´°èª¬æ˜ã€‚å®Ÿè£…æ–¹é‡ã‚’å«ã‚€",
      "type": "feature | bug_fix | refactoring | docs | test",
      "estimated_size": "small | medium | large",
      "tags": ["é–¢é€£ã™ã‚‹ã‚¿ã‚°"]
    }
  ]
}

## ãƒ«ãƒ¼ãƒ«
1. å„ã‚¿ã‚¹ã‚¯ã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œå¯èƒ½ãªå˜ä½ã«ã™ã‚‹
2. ã‚¿ã‚¹ã‚¯ã¯å…·ä½“çš„ã§å®Ÿè£…å¯èƒ½ãªå†…å®¹ã«ã™ã‚‹
3. æ›–æ˜§ãªè¦ä»¶ã¯ç¢ºèªäº‹é …ã¨ã—ã¦æ˜è¨˜ã™ã‚‹
4. ãƒã‚°ä¿®æ­£ã¨æ©Ÿèƒ½è¿½åŠ ã¯åˆ†ã‘ã¦è¨˜è¼‰ã™ã‚‹
5. ä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹å ´åˆã¯ description ã«è¨˜è¼‰ã™ã‚‹
"""
```

---

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å®Ÿè£…è¨ˆç”»

### 1. æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```
apps/web/src/components/
â”œâ”€â”€ BreakdownModal.tsx        # ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ€ãƒ«
â”œâ”€â”€ BreakdownTaskCard.tsx     # åˆ†è§£ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰
â””â”€â”€ BreakdownTaskList.tsx     # ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ
```

### 2. API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¿½åŠ 

```typescript
// lib/api.ts ã«è¿½åŠ 

export const breakdownApi = {
  analyze: (data: TaskBreakdownRequest) =>
    fetchApi<TaskBreakdownResponse>('/breakdown', {
      method: 'POST',
      body: JSON.stringify(data),
    }),
};

// tasksApi ã«è¿½åŠ 
export const tasksApi = {
  // ... existing methods
  
  bulkCreate: (data: TaskBulkCreate) =>
    fetchApi<TaskBulkCreated>('/tasks/bulk', {
      method: 'POST',
      body: JSON.stringify(data),
    }),
};
```

### 3. TypeScript å‹å®šç¾©è¿½åŠ 

```typescript
// types.ts ã«è¿½åŠ 

export type TaskType = 'feature' | 'bug_fix' | 'refactoring' | 'docs' | 'test';
export type EstimatedSize = 'small' | 'medium' | 'large';

export interface TaskBreakdownRequest {
  content: string;
  model_id: string;
  repo_id: string;
  context?: Record<string, unknown>;
}

export interface BrokenDownTask {
  title: string;
  description: string;
  type: TaskType;
  estimated_size: EstimatedSize;
  tags: string[];
}

export interface TaskBreakdownResponse {
  tasks: BrokenDownTask[];
  summary: string;
  original_content: string;
}

export interface TaskBulkCreate {
  repo_id: string;
  tasks: Array<{
    title: string;
    description?: string;
  }>;
}

export interface TaskBulkCreated {
  created_tasks: Task[];
  count: number;
}
```

### 4. Sidebar.tsx ã®å¤‰æ›´

```tsx
// æ—¢å­˜ã® New Task ãƒœã‚¿ãƒ³ã®ä¸‹ã«è¿½åŠ 
<button
  onClick={() => onBreakdownClick()}
  className={cn(
    'flex items-center justify-center gap-2 w-full py-2.5 px-3',
    'bg-purple-600 hover:bg-purple-700 rounded-lg',
    'text-sm font-medium transition-colors',
    'focus:outline-none focus:ring-2 focus:ring-purple-500'
  )}
>
  <SparklesIcon className="w-4 h-4" />
  Breakdown
</button>
```

### 5. ClientLayout.tsx ã®å¤‰æ›´

```tsx
// BreakdownModal ã®çŠ¶æ…‹ç®¡ç†ã‚’è¿½åŠ 
const [breakdownOpen, setBreakdownOpen] = useState(false);

// Sidebar ã« props ã‚’è¿½åŠ 
<Sidebar
  onSettingsClick={() => setSettingsOpen(true)}
  onBreakdownClick={() => setBreakdownOpen(true)}
/>

// ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¿½åŠ 
<BreakdownModal
  isOpen={breakdownOpen}
  onClose={() => setBreakdownOpen(false)}
/>
```

---

## å®Ÿè£…é †åº

### Phase 1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤

1. [ ] ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ¢ãƒ‡ãƒ«è¿½åŠ ï¼ˆ`domain/models.py`ï¼‰
2. [ ] `BreakdownService` å®Ÿè£…
3. [ ] `routes/breakdown.py` å®Ÿè£…
4. [ ] ãƒ†ã‚¹ãƒˆè¿½åŠ 

### Phase 2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºç›¤

5. [ ] å‹å®šç¾©è¿½åŠ ï¼ˆ`types.ts`ï¼‰
6. [ ] API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¿½åŠ ï¼ˆ`lib/api.ts`ï¼‰
7. [ ] `BreakdownModal` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ
8. [ ] `BreakdownTaskCard` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

### Phase 3: UI çµ±åˆ

9. [ ] `Sidebar.tsx` ã«ãƒœã‚¿ãƒ³è¿½åŠ 
10. [ ] `ClientLayout.tsx` ã«ãƒ¢ãƒ¼ãƒ€ãƒ«çµ±åˆ
11. [ ] E2E ãƒ†ã‚¹ãƒˆè¿½åŠ 

### Phase 4: æ”¹å–„

12. [ ] ã‚¿ã‚¹ã‚¯ç·¨é›†æ©Ÿèƒ½ï¼ˆåˆ†è§£çµæœã®ä¿®æ­£ï¼‰
13. [ ] ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®èª¿æ•´ãƒ»æ”¹å–„
14. [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

---

## å·¥æ•°è¦‹ç©ã‚‚ã‚Š

| Phase | å†…å®¹ | è¦‹ç©ã‚‚ã‚Š |
|-------|------|----------|
| Phase 1 | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰åŸºç›¤ | 4-6æ™‚é–“ |
| Phase 2 | ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åŸºç›¤ | 4-6æ™‚é–“ |
| Phase 3 | UI çµ±åˆ | 2-3æ™‚é–“ |
| Phase 4 | æ”¹å–„ | 2-4æ™‚é–“ |
| **åˆè¨ˆ** | | **12-19æ™‚é–“** |

---

## è€ƒæ…®äº‹é …

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- ãƒ’ã‚¢ãƒªãƒ³ã‚°æ–‡ç« ã«æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€ãƒ­ã‚°ã«æ®‹ã•ãªã„
- API ã‚­ãƒ¼ã‚’ä½¿ã£ãŸ LLM å‘¼ã³å‡ºã—ã¯æ—¢å­˜ã®æš—å·åŒ–æ¸ˆã¿ã‚­ãƒ¼ã‚’ä½¿ç”¨

### UX

- åˆ†è§£å‡¦ç†ä¸­ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- åˆ†è§£çµæœã®ç·¨é›†æ©Ÿèƒ½ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã®å¾®èª¿æ•´ï¼‰
- åˆ†è§£å¤±æ•—æ™‚ã®é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

- é•·æ–‡å…¥åŠ›æ™‚ã® LLM å‘¼ã³å‡ºã—ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
- åˆ†è§£çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼‰

### æ‹¡å¼µæ€§

- è¤‡æ•°è¨€èªå¯¾å¿œï¼ˆæ—¥æœ¬èª/è‹±èªã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆåˆ‡ã‚Šæ›¿ãˆï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚µãƒãƒ¼ãƒˆï¼ˆå°†æ¥ï¼‰
- ã‚¿ã‚¹ã‚¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆå°†æ¥ï¼‰
